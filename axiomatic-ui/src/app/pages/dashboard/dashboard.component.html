<div class="dashboard-container">
  <h1>DASHBOARD</h1>

  <section class="input-section">
    <h2>Enter or uplaoad asset details in JSON format</h2>
    <label for="jsonFileUpload">Upload JSON file:</label>
    <input
      id="jsonFileUpload"
      type="file"
      (change)="loadFile($event)"
      accept=".json"
      style="margin-bottom: 1rem"
    />
    <textarea
      [(ngModel)]="jsonInput"
      rows="15"
      placeholder="Paste here your JSON input..."
    ></textarea>

    <button
      mat-raised-button
      color="primary"
      class="btn-primary btn-label"
      (click)="sendRequest()"
    >
      Send to Oracle
    </button>
    <mat-spinner *ngIf="loading" diameter="32"></mat-spinner>
  </section>

  <section *ngIf="errorMessage && !response" class="error-section">
    <mat-card class="error-card" color="warn">
      <strong>Error:</strong>
      <pre>{{ errorMessage }}</pre>
    </mat-card>
  </section>

  <section class="output-section" *ngIf="response && !errorMessage">
    <h2>Result</h2>
    <pre>{{ response | json }}</pre>

    <button
      mat-stroked-button
      color="accent"
      class="btn-primary btn-label"
      (click)="simulatePublish()"
    >
      Publish on Algorand
    </button>
    <button
      mat-stroked-button
      color="primary"
      class="btn-primary btn-label"
      (click)="downloadResponse()"
      [disabled]="!response"
    >
      Download Response
    </button>
  </section>
</div>
